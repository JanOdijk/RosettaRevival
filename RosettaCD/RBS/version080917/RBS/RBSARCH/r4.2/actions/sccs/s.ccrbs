h13543
s 00005/00005/00027
d D 1.3 95/10/18 16:03:14 rous 3 2
c 
e
s 00032/00001/00000
d D 1.2 95/10/17 11:06:23 rous 2 1
c 
e
s 00001/00000/00000
d D 1.1 95/10/17 09:56:36 rous 1 0
c date and time created 95/10/17 09:56:36 by rous
e
u
U
f e 0
t
T
I 1
D 2
 
E 2
I 2
#! /bin/sh -e
#
D 3
# ccrbs <component_in> <component_out> <file>
E 3
I 3
# ccrbs <component_in> <component_out> <file> <debug>
E 3
#
D 3
echo "ccrbs: $1:$2"
E 3
I 3
echo "ccrbs: $1 to $2 $3 $4"
E 3
#
D 3
trap 'echo "cctool: Error during compilation"; rm -f $2.c; exit 1' 0
E 3
I 3
trap 'echo "ccrbs: Error during compilation"; rm -f $2.c; exit 1' 0
E 3
#
echo "  " >> warnings
#
#
fname=`$RBS_DIR/get_fname RBS_logicals $1 $3.c`
if test "$fname"
D 3
then echo "cctool: compiling: $fname" 
else echo "cctool: Could not find file $fname"
E 3
I 3
then echo "ccrbs: compiling: $fname" 
else echo "ccrbs: Could not find file $fname"
E 3
     exit
fi
if test -s $3.o
then  rm -f $3.o
fi
cp $fname .
#
cc -I$1/source -I$1/target -I$RBS_ARCHIVE$RBS_RELEASE/$1 -c $3.c 
#
rm -f $3.c
if test -s $3.o 
then 
  rm -f $2/target/$3.o
  mv $3.o $2/target/$3.o
fi
trap 0

E 2
E 1
