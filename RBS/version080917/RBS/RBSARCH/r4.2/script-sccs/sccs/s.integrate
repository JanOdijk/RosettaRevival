h13200
s 00014/00008/00023
d D 1.6 96/02/15 20:31:17 rous 6 5
c 
e
s 00004/00001/00027
d D 1.5 95/10/26 16:10:21 rous 5 4
c 
e
s 00002/00002/00026
d D 1.4 95/10/18 16:03:29 rous 4 3
c 
e
s 00008/00003/00020
d D 1.3 95/10/18 14:06:35 rous 3 2
c 
e
s 00023/00001/00000
d D 1.2 95/10/17 11:08:09 rous 2 1
c 
e
s 00001/00000/00000
d D 1.1 95/10/17 09:01:10 rous 1 0
c date and time created 95/10/17 09:01:10 by rous
e
u
U
f e 0
t
T
I 1
D 2
 
E 2
I 2
#! /bin/sh -e
I 3
#
# integrate [<platform>]
#
#
E 3
case $# in
0) ;;
D 3
*) echo "Usage: integrate"; exit 1;;
E 3
I 3
1) ;;
*) echo "Usage: integrate [<platform>]"; exit 1;;
E 3
esac
#
D 6
#set -x
#set -v
E 6
I 6
cd $RBS_USER_ROOT$RBS_USER$RBS_RELEASE
#
set -x
set -v
rm -f intusers.rbs
#
E 6
echo "What is the intended effect of your integration? (one-liner)"
read effect
I 6
#
if ( test -r inteffect.rbs )
then chmod o+rw inteffect.rbs
fi
echo "    $effect" > $RBS_USER_ROOT$RBS_USER$RBS_RELEASE/inteffect.rbs
#
E 6
echo "Which users should be informed? (list of usernames seperated by a space)"
read usernames
D 5
echo "$USER integrating. Effect: $effect" | mail "$usernames $USER"
E 5
I 5
for u in $USER $usernames ; do
D 6
   echo "informing user $u"
   echo "user $USER integrated. Effect: $effect" | mail $u@prle
E 6
I 6
   echo " $u" >> intusers.rbs
E 6
done
E 5
#
D 6
if ( test -r $RBS_USER_ROOT$RBS_USER$RBS_RELEASE/inteffect.rbs )
then chmod o+rw $RBS_USER_ROOT$RBS_USER$RBS_RELEASE/inteffect.rbs
fi
echo "    $effect" > $RBS_USER_ROOT$RBS_USER$RBS_RELEASE/inteffect.rbs
E 6
I 6
chmod o+rw intusers.rbs
E 6
#
if ( test -s $RBS_ENV )
D 3
then rsh $RBS_MACHINE "source $RBS_ENV; $RBS_DIR/batchintegrate &"
else rsh $RBS_MACHINE "$RBS_DIR/batchintegrate &"
E 3
I 3
D 4
then rsh $RBS_MACHINE "source $RBS_ENV; $RBS_DIR/batchintegrate $1 &"
else rsh $RBS_MACHINE "$RBS_DIR/batchintegrate $1 &"
E 4
I 4
then rsh $RBS_MACHINE "source $RBS_ENV; $RBS_DIR/batchintegrate nodebug $1 &"
else rsh $RBS_MACHINE "$RBS_DIR/batchintegrate nodebug $1 &"
E 4
E 3
fi
E 2
E 1
